---
layout:  post
title:  《TCP/IP协议详解》读书笔记（四）
date: 2019-06-16 13:32:20 +0300
tags: [计算机网络,读书笔记]
typora-root-url: .
typora-copy-images-to: ..\assets\clipimg
---

# 第12章 广播和多播

 

广播和多播仅应用于UDP，它们对需将报文同时传往多个接收者的应用来说十分重要。

 

**单播：**通常每个以太网帧仅发往单个目的主机，目的地址指明单个接收接口，因而称为单播(unicast)

 

**广播：**有时一个主机要向网上的所有其他主机发送帧， 这就是广播

 

**多播：**多播(multicast)处于单播和广播之间：帧仅传送给属于多播组的多个主机。

 

**对帧的过滤过程：**首先，网卡查看由信道传送过来的帧，确定是否接收该帧，若接收后就将它传往设备驱动程序。通常网卡仅接收那些目的地址为网卡物理地址或广播地址的帧。

 

![交 付  UDP  丢 弃  交 付  丢 弃  交 付  设 备 驱  去 弃  动 程 序  交 付  接 口 卡  去 弃  图 12 ． 1  协 议 栈 各 层 对 收 到 帧  的 过 滤 过 程 ](/../assets/clipimg/clip_image001-1560778359920.png)

**使用广播的问题**在于它增加了对广播数据不感兴趣主机的处理负荷。

 

**多播**的出现减少了对应用不感兴趣主机的处理负荷。使用多播，主机可加入一个或多个多播组。这样，网卡将获悉该主机属于哪个多播组，然后仅接收主机所在多播组的那些多播帧。

 

**四种广播地址**

1. 受限的广播
2. 指向网络的广播
3. 指向子网的广播
4. 指向所有子网的广播

 

**受限的广播**

受限的广播地址是255.255.255.255。该地址用于主机配置过程中IP数据报的目的地址，此时，主机可能还不知道它所在网络的网络掩码，甚至连它的IP地址也不知道。在任何情况下，路由器都不转发目的地址为受限的广播地址的数据报，这样的数据报仅出现在本地网络中。

 

**指向网络的广播**

指向网络的广播地址是主机号为全1的地址。A类网络广播地址为netid.255.255.255，其中netid为A类网络的网络号。一个路由器必须转发指向网络的广播，但它也必须有一个不进行转发的选择。

 

**指向子网的广播**

指向子网的广播地址为主机号为全1且有特定子网号的地址。作为子网直接广播地址的IP地址需要了解子网的掩码。例如，如果路由器收到发往128.1.2.255的数据报，当B类网络128.1的子网掩码为255.255.255.0时，该地址就是指向子网的广播地址；但如果该子网的掩码为255.255.254.0，该地址就不是指向子网的广播地址。

 

**指向所有子网的广播**

指向所有子网的广播也需要了解目的网络的子网掩码，以便与指向网络的广播地址区分开。指向所有子网的广播地址的子网号及主机号为全1。例如，如果目的子网掩码为255.255.255.0，那么IP地址128.1.255.255是一个指向所有子网的广播地址。然而，如果网络没有划分子网，这就是一个指向网络的广播。

 

**多播**

IP多播提供两类服务：

1. 向多个目的地址传送数据。有许多向多个接收者传送信息的应用：例如交互式会议系统和向多个接收者分发邮件或新闻。如果不采用多播，目前这些应用大多采用TCP来完成（向每个目的地址传送一个单独的数据复制）。然而，即使使用多播，某些应用可能继续采用TCP来保证它的可靠性。
2. 客户对服务器的请求。例如，无盘工作站需要确定启动引导服务器。目前，这项服务是通过广播来提供的（正如第16章的BOOTP），但是使用多播可降低不提供这项服务主机的负担。

 

![D  1  1  1  0  图 12 ． 2  28 位  多 播 组 ID  D 类 IP 地 址 格 式 ](/../assets/clipimg/clip_image002-1560778373144.png)



多播组地址包括为1110的**最高4bit**和**多播组号**。它们通常可表示为点分十进制数，范围从224.0.0.0到239.255.255.255。

 

能够接收发往一个特定多播组地址数据的主机集合称为**主机组(hostgroup)**。一个主机组可跨越多个网络。主机组中成员可随时加入或离开主机组。主机组中对主机的数量没有限制，同时不属于某一主机组的主机可以向该组发送信息。

 

一些多播组地址被IANA确定为**知名地址**。它们也被当作永久主机组，这和TCP及UDP中的熟知端口相似。同样，这些知名多播地址在RFC最新分配数字中列出。注意这些多播地址所代表的组是永久组，而它们的组成员却不是永久的。

 

**总结**

 

广播是将数据报发送到网络中的所有主机（通常是本地相连的网络），而多播是将数据报发送到网络的一个主机组。这两个概念的基本点在于当收到送往上一个协议栈的数据帧时采 用不同类型的过滤。每个协议层均可以因为不同的理由丢弃数据报。

 目前有四种类型的广播地址：受限的广播、指向网络的广播、指向子网的广播和指向所 有子网的广播。最常用的是指向子网的广播。受限的广播通常只在系统初始启动时才会用到。

试图通过路由器进行广播而发生的问题，常常是因为路由器不了解目的网络的子网掩码。结果与多种因素有关：广播地址类型、配置参数等等。

D类IP地址被称为多播组地址。通过将其低位23bit映射到相应以太网地址中便可实现多播组地址到以太网地址的转换。由于地址映射是不唯一的，因此需要其他的协议实现额外的数据报过滤。

